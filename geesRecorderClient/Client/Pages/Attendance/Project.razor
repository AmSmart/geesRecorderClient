@page "/attendance/project/{Id:int}"
@using Models = geesRecorderClient.Shared.Models;

@if (ProjectData is null)
{
    <Loading />
}
else
{

    <MatButton OnClick="Enrol">Enrol</MatButton>

    <MatButton>Add Extra Fingerprint</MatButton>

    <MatButton>Mark Attendance</MatButton>

    <MatButton>New Event</MatButton>

    <MatDialog>
        <MatDialogTitle>Add New Event</MatDialogTitle>
        <MatDialogContent>

        </MatDialogContent>
        <MatDialogActions>
            <MatButton>No Thanks</MatButton>
            <MatButton Type="submit">OK</MatButton>
        </MatDialogActions>
    </MatDialog>

}

@code{
    [Parameter]
    public int Id { get; set; }

    public Models.AttendanceProject ProjectData { get; set; } = null;

    [Inject]
    public NavigationManager NavigationManager { get; set; }

    [Inject]
    public ApiClient ApiClient { get; set; }

    protected override async Task OnInitializedAsync()
    {
        var result = await ApiClient.GetProject(Id);
        if (result.Succeeded && result.Data is AttendanceProject)
        {
            ProjectData = result.Data as AttendanceProject;
        }
        else
        {
            throw new Exception();
        }
    }

    public void Enrol()
    {
        NavigationManager.NavigateTo($"{ClientRoutes.EnrolAttendance}/{Id}");
    }
}